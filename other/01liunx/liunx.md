## liunx 常用命令

**1、stat [文件名] :查看文件的 inode 信息，所谓 inode**

硬盘的最小存储单位是扇区(Sector)，块(block)由多个扇区组成。文件数据存储在块中。块的最常见的大小是 4kb，约为 8 个连续的扇区组成（每个扇区存储 512 字节）。一个文件可能会占用多个 block，但是一个块只能存放一个文件。

虽然，我们将文件存储在了块(block)中，但是我们还需要一个空间来存储文件的 元信息 metadata ：如某个文件被分成几块、每一块在的地址、文件拥有者，创建时间，权限，大小等。这种 存储文件元信息的区域就叫 inode，译为索引节点：i（index）+node。 每个文件都有一个 inode，存储文件的元信息。

可以使用 stat 命令可以查看文件的 inode 信息。每个 inode 都有一个号码，Linux/Unix 操作系统不使用文件名来区分文件，而是使用 inode 号码区分不同的文件。

简单来说：inode 就是用来维护某个文件被分成几块、每一块在的地址、文件拥有者，创建时间，权限，大小等信息。

也就是说：inode:记录了文件的属性信息，可以使用 stat 命令查看 inode 信息

**2、linux 文件类型**

Linux 支持很多文件类型，其中非常重要的文件类型有: 普通文件，目录文件，链接文件，设备文件，管道文件，Socket 套接字文件等。

- 普通文件（-） ： 用于存储信息和数据， Linux 用户可以根据访问权限对普通文件进行查看、更改和删除。比如：图片、声音、PDF、text、视频、源代码等等。
- 目录文件（d，directory file） ：目录也是文件的一种，用于表示和管理系统中的文件，目录文件中包含一些文件名和子目录名。打开目录事实上就是打开目录文件。
- 符号链接文件（l，symbolic link） ：保留了指向文件的地址而不是文件本身。
- 字符设备（c，char） ：用来访问字符设备比如硬盘。
- 设备文件（b，block） ： 用来访问块设备比如硬盘、软盘。
- 管道文件(p,pipe) : 一种特殊类型的文件，用于进程之间的通信。
- 套接字(s,socket) ：用于进程间的网络通信，也可以用于本机之间的非网络通信。

**3、liunx 的目录树**

所有可操作的计算机资源都存在于目录树这个结构中，对计算资源的访问，可以看做是对这棵目录树的访问。

常见的目录说明:

- /bin： 存放二进制可执行文件(ls、cat、mkdir 等)，常用命令一般都在这里；
- /etc： 存放系统管理和配置文件；
- /home： 存放所有用户文件的根目录，是用户主目录的基点，比如用户 user 的主目录就是/home/user，可以用~user 表示；
- /usr ： 用于存放系统应用程序；
- /opt： 额外安装的可选应用程序包所放置的位置。一般情况下，我们可以把 tomcat 等都安装到这里；
- /proc： 虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息；
- /root： 超级用户（系统管理员）的主目录（特权阶级^o^）；
- /sbin: 存放二进制可执行文件，只有 root 才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序。如 ifconfig 等；
- /dev： 用于存放设备文件；
- /mnt： 系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的文件系统；
- /boot： 存放用于系统引导时使用的各种文件；
- /lib ： 存放着和系统运行相关的库文件 ；
- /tmp： 用于存放各种临时文件，是公用的临时文件存储点；
- /var： 用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的日志文件（系统启动日志等。）等；
- /lost+found： 这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows 下叫什么.chk）就在这里。

**常用命令**

- cd :切换目录 cd /home cd ../ cd -(这个意思是切换上一个操作所在的目录)
- find:查找目录 find /home -name "\*.txt" (查找 home 目录下以.txt 结尾的文件)，find .(列出当前目录及子目录下的所有文件和文件夹)
- mv:可以移动目录，移动文件，还可以对目录重命名
  例如：mv 目录名称 新目录名称
- cp -r 目录位置 目录的新位置：拷贝目录到新的位置，对文件的拷贝 不需要加-r
- tail -f :对文件动态的监控
- tar -zcvf 打包压缩后的文件名 要打包压缩的文件名
  其中：z 表示调用 gzip 压缩命令进行压缩 c:打包文件 v :显示运行过程 f:指定文件名称

- tar -xvf -C:解压文件到指定文件夹 其中 x 代表解压

权限命令：
ls -l：可以查看权限

```bash
➜  ~ ll
total 8.5M
drwxr-xr-x  3 root root   4.0K Feb  5 09:24 JavaCode
-rw-r--r--  1 root root     75 Feb  5 09:22 Makefile
drwxr-xr-x  4 root root   4.0K Feb 17 16:39 PythonCode
-rw-r--r--  1 root root     75 Feb  5 09:19 README.md
drwxr-xr-x  4 root root   4.0K Feb  9 23:52 VueCode
drwxr-xr-x  5 root root   4.0K Feb  7 23:02 go
drwxr-xr-x  3 root root   4.0K Feb 11 15:54 logs
drwxr-xr-x  4 root root   4.0K Feb 13 23:15 lua
drwxr-xr-x 16 root root   4.0K Feb  9 22:37 node_modules
-rw-r--r--  1 root root    18K Feb  9 23:05 package-lock.json
-rw-r--r--  1 root root     55 Feb  9 22:37 package.json
-rwxr-xr-x  1 1001 docker 8.4M Dec 14 00:12 starship
```

其中第一个字母代表文件的类型：
d:代表目录，-：代表普通文件，l：代表连接文件

第一个字母后面的代表文件的权限，每三个一组
第一组代表属主权限，第二个代表属组权限，第三个代表其他权限

其中 r:代表可读，w:代表可以写，x：代表可执行
r 可以用 4 表示，w 可以用 2 表示，x 可以用 1 表示

在 linux 中的每个用户必须属于一个组，不能独立于组外。在 linux 中每个文件有所有者、所在组、其它组的概念。

所有者(u) ：一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者，用 `ls ‐ahl` 命令可以看到文件的所有者 也可以使用 chown 用户名 文件名来修改文件的所有者 。
文件所在组(g) ：当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组用 `ls ‐ahl`命令可以看到文件的所有组也可以使用 chgrp 组名 文件名来修改文件所在的组。
其它组(o) ：除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组

- chown 用户名 文件名：可以修改文件的所有者
- chgrp 组名 文件名 可以修改文件的所有组
- chmod u=rwx g=r-- o=--- aaa.txt：可以修改文件的权限

为创建的脚本 zookeeper 添加可执行权限:chmod -x zoookeeper
将这个脚本添加到开机启动项:chkconfig --add zookeeper
查看是否添加成功:chkconfig --list

**linux 用户管理:**

- useradd 选项 用户名:添加用户账号
- userdel 选项 用户名:删除用户帐号
- usermod 选项 用户名:修改帐号
- passwd 用户名:更改或创建用户的密码
- passwd -S 用户名 :显示用户账号密码信息
- passwd -d 用户名: 清除用户密码

**linux 用户组管理:**
用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对/etc/group 文件的更新。

- groupadd 选项 用户组 :增加一个新的用户组
- groupdel 用户组:要删除一个已有的用户组
- groupmod 选项 用户组 : 修改用户组的属性

**其他命令**

- pwd:显示当前所在位置
- sudo + 其他命令:以系统管理者的身份执行命令
- grep 要搜索的字符串 要搜索的文件 --color:搜索命令 --color 代表高亮显示
- ps -ef/ ps -aux :这两个命令都是查看当前系统正在运行的进程，区别在于显示格式不同
  ps aux | grep redis(查看包括 redis 字符串的进程)
- kill -9 进程的 pid:杀死进程(-9 表示强制终止)，先 ps 查看进程，然后 kill 杀掉
- reboot:重启

- ls -color=auto 命令输出着色，可以看出文件和目录之间的区别

- alias：这个命令允许在 shell 会话中定义临时别名，创建临时别名时，指定 shell 用一系列命令替换单词
  例如着色:

```bash
alias ls="ls --color=auto"
```

- unalias 可以删除定义的别名命令

- man 显示其他命令的手册
- touch -m 文件名：修改文件的修改时间
- ./ 这个符号本身不是命令，但是允许 shell 在终端允许可执行文件
- exit:结束命令
- htop：htop 是一种交互式流程查看器，可让您直接从终端管理计算机的资源
- unzip :unzip 命令允许您从终端提取.zip 文件的内容。同样，默认情况下可能不会安装此软件包，因此请确保使用 package 管理器安装它。
- apt:用来安装、更新、删除软件
- echo：用于在终端显示定义的文本
- history:过去使用过的命令
- which:输出完整的路径,比如 which python
- head :输出文本的前几行
